install.packages("survminer")
runApp('.cache/.fr-5CJkrk/Vol_Analytic_Version_2/app (1).R')
library(survminer)
runApp('.cache/.fr-5CJkrk/Vol_Analytic_Version_2/app (1).R')
runApp('.cache/.fr-5CJkrk/Vol_Analytic_Version_2/app (1).R')
runApp('.cache/.fr-5CJkrk/Vol_Analytic_Version_2/app (1).R')
install.packages("plotly")
runApp('.cache/.fr-5CJkrk/Vol_Analytic_Version_2/app (1).R')
install.packages("curl")
library(shiny)
runApp('.cache/.fr-ufe926/Vol_Analytic_Version_2/app (1).R')
library(shiny); runApp('Documents/AHS /Vol Analytic App/Vol_Analytic_Version_2/app (1).R')
runApp('Documents/AHS /Vol Analytic App/Vol_Analytic_Version_2/app (1).R')
install.packages("prettydoc")
library(prettydoc)
?prettydoc
html_pretty()
?html_pretty()
install.packages("kableExtra")
install.packages("kableExtra")
library(kable)
install.packages("kableExtra")
install.packages("kableExtra")
library(kable)
library(kableExtra)
library(magrittr)
library(kableExtra)
paper_color <- c("Blue","Green","Orange")
parking_lots <- c("Parking Lot 1","Parking Lot 2","Parking Lot 3","Parking Lot 4")
combo_list <- list("Paper Color"=paper_color,"Parking Lots"=parking_lots)
combinations <- combo_list %>% expand.grid
kable(combinations)
library(magrittr)
library(kableExtra)
paper_color <- c("Blue","Green","Orange")
parking_lots <- c("Parking Lot 1","Parking Lot 2","Parking Lot 3","Parking Lot 4")
combo_list <- list("Paper Color"=paper_color,"Parking Lots"=parking_lots)
combinations <- combo_list %>% expand.grid %>% t
kable(combinations)
?kable
library(magrittr)
library(kableExtra)
paper_color <- c("Blue","Green","Orange")
parking_lots <- c("Parking Lot 1","Parking Lot 2","Parking Lot 3","Parking Lot 4")
combo_list <- list("Paper Color"=paper_color,"Parking Lots"=parking_lots)
combinations <- combo_list %>% expand.grid
kable(combinations)
library(magrittr)
library(kableExtra)
paper_color <- c("Blue","Green","Orange")
parking_lots <- c("Parking Lot 1","Parking Lot 2","Parking Lot 3","Parking Lot 4")
combo_list <- list("Paper Color"=paper_color,"Parking Lots"=parking_lots)
combinations <- combo_list %>% expand.grid
kable(combinations) %>% kable_material(c("striped","hover"))
library(magrittr)
library(kableExtra)
paper_color <- c("Blue","Green","Orange")
parking_lots <- c("Parking Lot 1","Parking Lot 2","Parking Lot 3","Parking Lot 4")
combo_list <- list("Paper Color"=paper_color,"Parking Lots"=parking_lots)
combinations <- combo_list %>% expand.grid
combinations %>% kbl %>% kable_material(c("striped","hover"))
?kable_material
?kable_paper
?column_spec
library(magrittr)
library(kableExtra)
paper_color <- c("Blue","Green","Orange")
parking_lots <- c("Parking Lot 1","Parking Lot 2","Parking Lot 3","Parking Lot 4")
combo_list <- list("Paper Color"=paper_color,"Parking Lots"=parking_lots)
combinations <- combo_list %>% expand.grid
combinations %>% kbl %>% kable_material(bootstrap_options = "striped",full_width = FALSE) %>% column_spec(1,width = "10cm") %>% column_spec(2,width = "10cm")
?kable
?kable_styling
?expand.grid
c(1:20)
barrels <- c(1:20)
batch <- c(1:5)
barrel_combo_list <- list("Batch"=batches,"Barrel" = barrels)
barrel_combo_list <- list("Batch"=batch,"Barrel" = barrels)
barrel_combo_list %>% expand.grid()
library(magritter)
library(magrittr)
barrel_combo_list %>% expand.grid()
?with
with(barrel_combo_list %>% as.data.frame,)
with(barrel_combo_list %>% as.data.frame,rbind("Batch" = table(batch:barrels)))
with(barrel_combo_list %>% as.data.frame,rbind("Batch" = table(batch:barrels))) %>% view
with(barrel_combo_list %>% as.data.frame,rbind("Batch" = table(batch:barrels))) %>% View
?table
barrel_combo_list %<>% as.data.frame
barrel_combo_list$Batch %>% as.factor()
barrel_combo_list$Batch %<>% as.factor()
batch_df <- barrel_combo_list
rm(barrel_combo_list)
batch_df
table(batch_df)
table(batch_df) %>% t
library(dplyr)
?case_when
table(batch_df) %>% t %>% case_when(batch == 0 ~ "x")
batch_df <- table(batch_df) %>% t
batch_df %<>% as.data.frame()
View(batch_df)
batch_df <- barrel_combo_list
batch_df <- data.frame("Batch" = batch,"Barrel" = barrels)
?table
batch_df %>% str
batch_df$Batch %<>% as.factor
batch_df %>% str
View(batch_df)
View(batch_df)
batch_df %>% t
batch_df %<>% t
batch_df %>% table
View(batch_df)
batch_df <- data.frame("Batch" = batch,"Barrel" = barrels)
batch_df %>% table
batch_df %>% table %>% t
?if_else
batch_df %>% table %>% t %>% if_else(Barrel == 0,"X")
ifelse()
?ifelse()
batch_df %>% table %>% t %>% str()
batch_df %>% table %>% t %>% as.data.frame() %>% str
batch_df %>% table %>% t %>% as.data.frame()
batch_df %>% table %>% t %>% ifelse("Barrel" == "0")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X","1")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X","1")
batch_df %>% table %>% t %>% ifelse(test = "Barrel" == "0",yes = "X",no = "1")
batch_df %>% table %>% t %>% ifelse(test = "Barrel" == "0",yes = "X")
batch_df %>% table %>% t %>% ifelse(test = "Barrel" == "0",yes = "X")
batch_df %>% table %>% t
batch_df %>% table %>% t %>% if_else(Barrel == "0","X","1")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X","1")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X") %>% ifelse("Barrel" == FALSE,"1")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X") %>% ifelse("Barrel" == FALSE,"1") %>% str
?na.action
library(tidyr)
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X") %>% ifelse("Barrel" == FALSE,"1") %>% replace_na("X")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X") %>% ifelse("Barrel" == FALSE,"1") %>% replace_na("x")
library(magrittr)
library(kableExtra)
batches <- c(1:5)
barrels <- c(1:20)
batch_df %>% table %>% t %>% ifelse("Barrel" == "0","X") %>%
ifelse("Barrel" == FALSE,"1") %>% replace_na("x")
batch_df %>% kable(format = "html",align = "c") %>% kable_styling(bootstrap_options = "striped",full_width = FALSE,position = "float_right",font_size = 12,wraptable_width = "10pt")
library(magrittr)
library(kableExtra)
library(tidyr)
batches <- c(1:5)
barrels <- c(1:20)
batch_df <- data.frame("Batch" = batches,"Barrel" = barrels)
batch_df %<>% table %>% t %>% ifelse("Barrel" == "0",NA) %>%
ifelse("Barrel" == "1","x") %>% na.omit
batch_df %>% kable(format = "html",align = "c") %>% kable_styling(bootstrap_options = "striped",full_width = FALSE,position = "float_right",font_size = 12,wraptable_width = "10pt")
batch_df <- data.frame("Batch" = batches,"Barrel" = barrels)
View(batch_df)
View(batch_df)
batch_df %>% table %>% t
batch_df %>% table %>% t %>% ifelse("Barrel" == "0",NA)
batch_df %>% table %>% t %>% ifelse("Barrel" == "0",NA) %>% ifelse("Barrel" == FALSE,"x")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0",NA) %>% ifelse("Barrel" == FALSE,"x")
batch_df %>% table %>% t %>% ifelse("Barrel" == "0",NA) %>% ifelse("Barrel" == FALSE,"x") %>% na.omit()
batch_df %>% table %>% t %>% ifelse("Barrel" == "0",NA) %>% ifelse("Barrel" == FALSE,"x") %>% View()
?kable_styling
library(kableExtra)
add_header_above()
?add_header_above()
?pack_rows
?add_header_above
?kable_styling
?kable
?footnote
?kable
?column_spec
row_spec()
?row_spec()
data.frame("Color" = c("Blue","Green","Orange"),"Response Rate" = c(27,26,30,27,34,29,34,28,25,30,29,31,24,27,29,28,33))
?data.frame
list("Blue","Green","Orange")
list("Blue","Green","Orange") -> test
test["Blue"]
test["Blue"] <- c(27,26,30,27,34,29)
test
rm(test)
data.frame("Blue" = c(27,26,30,27,34,29),"Green" = c(34,28,25,30,29))
data.frame("Blue" = c(27,26,30,27,34,29),"Green" = c(34,28,25,30,29,NA))
data.frame("Blue" = c(27,26,30,27,34,29),"Green" = c(34,28,25,30,29,NA),"Orange" = 31,24,27,29,28,33) -> test
test
library(dplyr)
library(magrittr)
test %>% select(Blue,Green,Orange)
test %<>% select(Blue,Green,Orange)
library(ggplot2)
test %>% geom_dotplot()
test %>% ggplot(aes(x = Green))+geom_dotplot()
library(readr)
discussion_2_data <- read_csv2(file = /home/cam/Downloads/data_discussion1.csv)
discussion_2_data <- read_csv2(file = /home/cam/Downloads/data_discussion1.csv)
discussion_2_data <- read_csv2(file = home/cam/Downloads/data_discussion1.csv)
discussion_2_data <- read_csv2(file = "/home/cam/Downloads/data_discussion1.csv")
discussion_2_data <- read_csv2(file = "/home/cam/Downloads/data_discussion1.csv")
View(discussion_2_data)
discussion_2_data <- read.csv(file = "/home/cam/Downloads/data_discussion1.csv")
View(discussion_2_data)
_2_data <- read.csv(file = "/home/cam/Downloads/data_discussion1.csv")
dis _2_data <- read.csv(file = "/home/cam/Downloads/data_discussion1.csv")
dis_2_data <- read.csv(file = "/home/cam/Downloads/data_discussion1.csv")
rm(discussion_2_data)
dis_2_data <- dis_2_data[,-1]
View(dis_2_data)
measures <- c(dis_2_data$X1,dis_2_data$X2,dis_2_data$X3)
level = c(rep(1,10),rep(2,10),rep(3,10))
library(ggplot2)
ggplot(dis_2_data,aes(x = measures,y = level)) + geom_dotplot()
ggplot(measures,aes(x = measures,y = level)) + geom_dotplot()
ggplot(aes(x = measures,y = level)) + geom_dotplot()
View(dis_2_data)
new_dat <- data.frame("levels" = c(rep(1,10),rep(2,10),rep(3,10))),"measures" = c(dis_2_data$X1,dis_2_data$X2,dis_2_data$X3))
new_dat <- data.frame("levels" = c(rep(1,10),rep(2,10),rep(3,10)),"measures" = c(dis_2_data$X1,dis_2_data$X2,dis_2_data$X3))
View(new_dat)
ggplot(data = new_dat,aes(x = measures,y = level)) + geom_dotplot()
ggplot(data = new_dat,aes(x = measures,y = level)) + geom_dotplot()
ggplot(data = new_dat,aes(x = measures,y = level)) + geom_dotplot(aes(y = level))
mean(dis_2_data$X1)
mean(dis_2_data$X2)
mean(dis_2_data$X3)
dis_2_data$X1 %>% mean
library(magrittr)
dis_2_data$X1 %>% mean
?apply
dis_2_data %>% apply(2,mean)
dis_2_data %>% apply(2,mean) %>% str
dis_2_data %>% apply(2,mean) %>% is.vector()
dis_2_data %>% apply(3,mean) %>%
dis_2_data %>% apply(3,mean)
dis_2_data %>% dim
dis_2_data %>% apply(1,mean)
dis_2_data %>% lapply(1,mean)
dis_2_data %>% lapply(mean)
dis_2_data %>% lapply(density)
ggplot(dis_2_data,aes(x = X1)) + geom_histogram()+geom_density()
ggplot(dis_2_data,aes(x = X1)) + geom_histogram()+geom_density()+ggplot(dis_2_data,aes(x = X2))+geom_histogram()+geom_density()
ggplot(dis_2_data,aes(x = X1)) + geom_histogram()+geom_density(aes(color = "green"))
ggplot(dis_2_data,aes(x = X1)) + geom_histogram(bins = 20)+geom_density(aes(color = "green"))
dis_2_data %>% sapply(density)
dis_2_data %>% sapply(mean)
dis_2_data %>% sapply(mean) %>% is.vector
dis_2_data %>% sapply(mean) %>% str
dis_2_data %>% vapply(mean)
View(new_dat)
?aov
new_dat %>% str
new_dat$levels %>% as.factor()
new_dat$levels %<>% as.factor
new_dat %>% str
model <- aov(measures~levels,new_dat)
model %>% summary
model %>% summary.aov()
rm(list=ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(tidyverse)
library(dplyr)
library(plyr)
load("/home/cam/Documents/Reseach Fall 2020/Medfly Research/Han's Code/fly_male.Rda")
View(fly_male)
fly_male <- load(/home/cam/Documents/Reseach Fall 2020/Medfly Research/Han's Code/fly_male.Rda)
combine = function(fly.df, dat){
for(i in 2:ncol(dat)){
dat.sub = data.frame(age = dat[-c(1,2,3,4),1] %>% as.numeric(),
num = dat[-c(1,2,3,4), i] %>% as.numeric(),
Cohort = dat[1,i],
Size = dat[2,i],
Cage = dat[3,i],
seg  = dat[4,i])
fly.df = fly.df %>% rbind(dat.sub)
}
return(fly.df)
}
L = 173
fly.df = data.frame()
df.male = read.table("MALE.txt", nrows = 21*(L+4))
col_time = read.table("MALE.txt", header = FALSE, nrows = L + 4)[,1]
for(i in 1:21){
dat = df.male[(1+(i-1)*(L+4)):(i*(L+4)), ]
if(dat[1,1] != "Cohort") {
dat = cbind(col_time, dat)
}
fly.df = fly.df %>% combine(dat)
}
fly_male = fly.df
save(fly_male, file = "fly_male.Rda")
fly.df = data.frame()
df.female = read.table("FEMALE.txt", nrows = 21*(L+4))
col_time = read.table("FEMALE.txt", header = FALSE, nrows = L + 4)[,1]
for(i in 1:21){
dat = df.female[(1+(i-1)*(L+4)):(i*(L+4)), ]
if(dat[1,1] != "Cohort") {
dat = cbind(col_time, dat)
}
fly.df = fly.df %>% combine(dat)
}
fly_female = fly.df
save(fly_female, file = "fly_female.Rda")
fly_male <- load("/home/cam/Documents/Reseach Fall 2020/Medfly Research/Han's Code/fly_male.Rda")
load("/home/cam/Documents/Reseach Fall 2020/Medfly Research/Han's Code/fly_male.Rda")
load("/home/cam/Documents/Reseach Fall 2020/Medfly Research/Han's Code/fly_female.Rda")
fly_male %>% tail()
i
combine = function(fly.df, dat){
for(i in 2:ncol(dat)){
dat.sub = data.frame(age = dat[-c(1,2,3,4),1] %>% as.numeric(),
num = dat[-c(1,2,3,4), i] %>% as.numeric(),
Cohort = dat[1,i],
Size = dat[2,i],
Cage = dat[3,i],
seg  = dat[4,i])
fly.df = fly.df %>% rbind(dat.sub)
}
return(fly.df)
}
fly_male %>% head
L = 173
?read.table
L = 173
fly.df = data.frame()
df.male = read.table("MALE.txt", nrows = 21*(L+4))
View(df.male)
col_time = read.table("MALE.txt", header = FALSE, nrows = L + 4)[,1]
for(i in 1:21){
dat = df.male[(1+(i-1)*(L+4)):(i*(L+4)), ]
if(dat[1,1] != "Cohort") {
dat = cbind(col_time, dat)
}
fly.df = fly.df %>% combine(dat)
}
fly_male = fly.df
rm(list=ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(frechet)
library(fdapace)
load("fly_male.Rda")
load("fly_female.Rda")
#construct survival function
df = fly_male %>% filter(Cohort == "1", Size == '4', Cage == '1')
View(df)
df = df %>% summarise(age=age,
lx = num,
dx = c(-diff(df$num),0),
qx = ifelse(lx==0, 0, dx / lx),
px = 1 - qx,
Cohort = Cohort,
Size = Size,
Cage = Cage,
Sex  = seg
)
View(df)
?CreateDensity
?diff
df$num
df$lx
df$dx
3673
3673-3660
13/17
?ifelse
13/3673
?Lwls1D
?FPCA
?Lwls1D
?CreateDensity
rep(df$age,df$dx)
#smooth the survival function and create density function
df = df %>% mutate(survival = Lwls1D(bw = 2.5,
kernel_type = 'epan',
xin = df$age,
yin = lx / lx[1],
xout = df$age) ,
density  = CreateDensity(y = rep(df$age, df$dx),
optns=list(outputGrid = df$age))$y)
View(df)
colormap = c("density" = 'red', 'survival' = 'black', 'hazard' = 'blue')
gg = ggplot(df) +
geom_line(aes(x = age, y = density, color = 'density')) +
geom_line(aes(x = age, y = survival, color = 'survival')) +
scale_color_manual(values = colormap)
gg
df %<>% summarise(hazard = survival/density)
library(magrittr)
df %<>% summarise(hazard = survival/density)
View(df)
rm(list=ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(frechet)
library(fdapace)
library(magrittr)
load("fly_male.Rda")
load("fly_female.Rda")
#construct survival function
df = fly_male %>% filter(Cohort == "1", Size == '4', Cage == '1')
df = df %>% summarise(age=age,
lx = num,
dx = c(-diff(df$num),0),
qx = ifelse(lx==0, 0, dx / lx),
px = 1 - qx,
Cohort = Cohort,
Size = Size,
Cage = Cage,
Sex  = seg
)
#smooth the survival function and create density function
df = df %>% mutate(survival = Lwls1D(bw = 2.5,
kernel_type = 'epan',
xin = df$age,
yin = lx / lx[1],
xout = df$age) ,
density  = CreateDensity(y = rep(df$age, df$dx),
optns=list(outputGrid = df$age))$y)
df %<>% mutate(hazard = survival/density)
View(df)
colormap = c("density" = 'red', 'survival' = 'black', 'hazard' = 'blue')
gg = ggplot(df) +
geom_line(aes(x = age, y = density, color = 'density')) +
geom_line(aes(x = age, y = survival, color = 'survival')) +
geom_line(aes(x = age,y = hazard,color = "hazard"))
scale_color_manual(values = colormap)
gg
library(frechet)
library(fdapace)
library(magrittr)
load("fly_male.Rda")
load("fly_female.Rda")
#construct survival function
df = fly_male %>% filter(Cohort == "1", Size == '4', Cage == '1')
df = df %>% summarise(age=age,
lx = num,
dx = c(-diff(df$num),0),
qx = ifelse(lx==0, 0, dx / lx),
px = 1 - qx,
Cohort = Cohort,
Size = Size,
Cage = Cage,
Sex  = seg
)
#smooth the survival function and create density function
df = df %>% mutate(survival = Lwls1D(bw = 2.5,
kernel_type = 'epan',
xin = df$age,
yin = lx / lx[1],
xout = df$age) ,
density  = CreateDensity(y = rep(df$age, df$dx),
optns=list(outputGrid = df$age))$y)
df %<>% mutate(survivor = 1-density)
df %<>% mutate(hazard = density/survivor)
View(df)
colormap = c("density" = 'red', 'survival' = 'black', 'hazard' = 'blue')
gg = ggplot(df) +
geom_line(aes(x = age, y = density, color = 'density')) +
geom_line(aes(x = age, y = survival, color = 'survival')) +
geom_line(aes(x = age,y = hazard,color = "hazard"))
gg
rm(list=ls())
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(frechet)
library(fdapace)
library(magrittr)
load("fly_male.Rda")
load("fly_female.Rda")
#construct survival function
df = fly_male %>% filter(Cohort == "1", Size == '4', Cage == '1')
df = df %>% summarise(age=age,
lx = num,
dx = c(-diff(df$num),0),
qx = ifelse(lx==0, 0, dx / lx),
px = 1 - qx,
Cohort = Cohort,
Size = Size,
Cage = Cage,
Sex  = seg
)
#smooth the survival function and create density function
df = df %>% mutate(survival = Lwls1D(bw = 2.5,
kernel_type = 'epan',
xin = df$age,
yin = lx / lx[1],
xout = df$age) ,
density  = CreateDensity(y = rep(df$age, df$dx),
optns=list(outputGrid = df$age))$y)
df %<>% mutate(hazard = log(-survival))
View(df)
-log(1.00414)
df %<>% mutate(hazard = -log(survival))
View(df)
colormap = c("density" = 'red', 'survival' = 'black', 'hazard' = 'blue')
gg = ggplot(df) +
geom_line(aes(x = age, y = density, color = 'density')) +
geom_line(aes(x = age, y = survival, color = 'survival')) +
geom_line(aes(x = age,y = hazard,color = "hazard"))
gg
library(plotly)
gg %<>% ggplotly
gg
gg = ggplot(df) +
geom_line(aes(x = age, y = density, color = 'density')) +
geom_line(aes(x = age, y = survival, color = 'survival')) +
geom_line(aes(x = age,y = hazard,color = "hazard"))
scale_color_manual(values = colormap)
gg
View(df)
